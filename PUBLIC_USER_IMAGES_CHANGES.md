# –ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –±–∞–∫–µ—Ç–∞ user-images

## ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

### **1. –û–±–Ω–æ–≤–ª–µ–Ω ImageStorageService:**
- `uploadUserCardImage()` - —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π URL –≤–º–µ—Å—Ç–æ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ
- `getPublicImageUrl()` - –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `bucket` –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –±–∞–∫–µ—Ç–∞
- `getImageUrlWithTransform()` - –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `bucket` –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π

### **2. –û–±–Ω–æ–≤–ª–µ–Ω CardService:**
- `getCardImageUrl()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ URL –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `getCardThumbnailUrl()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ URL —Å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è–º–∏

### **3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è:**
- –ë–∞–∫–µ—Ç `user-images` —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞–∫ –ø—É–±–ª–∏—á–Ω—ã–π (`public: true`)

### **4. –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ:**
- `MANUAL_STORAGE_SETUP_GUIDE.md` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ `user-images`

## üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Supabase Dashboard:**

### **1. –°–¥–µ–ª–∞–π—Ç–µ –±–∞–∫–µ—Ç `user-images` –ø—É–±–ª–∏—á–Ω—ã–º:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Storage** ‚Üí **Buckets**
2. –ù–∞–π–¥–∏—Ç–µ –±–∞–∫–µ—Ç `user-images`
3. –ù–∞–∂–º–∏—Ç–µ **Settings** (—à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∞)
4. –í–∫–ª—é—á–∏—Ç–µ **"Public bucket"**
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### **2. –û–±–Ω–æ–≤–∏—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏:**
–ó–∞–º–µ–Ω–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞:

```sql
-- –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏
DROP POLICY IF EXISTS "read_own_files" ON storage.objects;
DROP POLICY IF EXISTS "insert_own_files" ON storage.objects;
DROP POLICY IF EXISTS "update_own_files" ON storage.objects;
DROP POLICY IF EXISTS "delete_own_files" ON storage.objects;

-- –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏
CREATE POLICY "read_public_user_images"
ON storage.objects FOR SELECT
TO authenticated, anon
USING (bucket_id = 'user-images');

CREATE POLICY "insert_own_files"
ON storage.objects FOR INSERT
TO authenticated
WITH CHECK (bucket_id = 'user-images' AND owner = auth.uid());

CREATE POLICY "update_own_files"
ON storage.objects FOR UPDATE
TO authenticated
USING (bucket_id = 'user-images' AND owner = auth.uid())
WITH CHECK (bucket_id = 'user-images' AND owner = auth.uid());

CREATE POLICY "delete_own_files"
ON storage.objects FOR DELETE
TO authenticated
USING (bucket_id = 'user-images' AND owner = auth.uid());
```

## ‚ö†Ô∏è **–í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–Ω–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö URL)
- ‚úÖ –ü—Ä–æ—â–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è **–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º**
- ‚ö†Ô∏è **–ù–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
- ‚ö†Ô∏è **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:
- **`cards/`** - –ø—É–±–ª–∏—á–Ω—ã–µ –æ–±—â–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **`user-images/`** - –ø—É–±–ª–∏—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –ø—Ä—è–º—ã–º –ø—É–±–ª–∏—á–Ω—ã–º URL
- –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è –æ–±–æ–∏—Ö –±–∞–∫–µ—Ç–æ–≤
- Leonardo.AI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ø—É–±–ª–∏—á–Ω—ã–µ –±–∞–∫–µ—Ç—ã

## üöÄ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å –ø—É–±–ª–∏—á–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –∏ –æ–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∫–µ—Ç–∞ –≤ Supabase Dashboard.







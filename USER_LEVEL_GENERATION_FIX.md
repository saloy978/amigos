# ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–ª–æ–≤**

## üîß **–ü—Ä–æ–±–ª–µ–º–∞:**
–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–ª–æ–≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–ª—è–ª–æ —É—Ä–æ–≤–µ–Ω—å —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í–º–µ—Å—Ç–æ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`user_settings`), —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —É—Ä–æ–≤–µ–Ω—å –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`currentUser.level`), –∫–æ—Ç–æ—Ä—ã–π –º–æ–≥ –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –∏–ª–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –≤ –ø—Ä–æ—Ñ–∏–ª–µ.

## üéØ **–†–µ—à–µ–Ω–∏–µ:**

### **1. –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getUserLevel()`:**
```typescript
const getUserLevel = async (): Promise<string> => {
  try {
    // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
    if (currentSettings && 'level' in currentSettings && currentSettings.level) {
      return currentSettings.level as string;
    }
    
    // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: —Å–≤–µ–∂–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ localStorage
    const freshSettings = UserService.getUserSettings();
    if (freshSettings?.level) {
      return freshSettings.level;
    }
    
    // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    const dbUser = await UserService.getCurrentUserFromDB();
    if (dbUser?.level) {
      return dbUser.level;
    }
    
    // Fallback: –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    return currentUser?.level || 'A1';
  } catch (error) {
    console.warn('Error getting user level, using fallback:', error);
    return currentUser?.level || 'A1';
  }
};
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —É—Ä–æ–≤–Ω—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
```typescript
const [userLevel, setUserLevel] = useState<string>('A1');
```

### **3. –î–æ–±–∞–≤–ª–µ–Ω useEffect –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —É—Ä–æ–≤–Ω—è:**
```typescript
useEffect(() => {
  const loadUserLevel = async () => {
    try {
      const level = await getUserLevel();
      setUserLevel(level);
    } catch (error) {
      console.warn('Error loading user level:', error);
      setUserLevel(currentUser?.level || 'A1');
    }
  };
  
  loadUserLevel();
}, [currentSettings, currentUser]);
```

### **4. –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã AI —Å–µ—Ä–≤–∏—Å–æ–≤:**

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
const freeAIRequest = {
  userLevel: currentUser.level, // ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–π —É—Ä–æ–≤–µ–Ω—å
  // ...
};
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
const freeAIRequest = {
  userLevel: await getUserLevel(), // ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
  // ...
};
```

### **5. –û–±–Ω–æ–≤–ª–µ–Ω UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ –æ–±—É—á–µ–Ω–∏—è
- –û–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è
- –°–æ–æ–±—â–µ–Ω–∏—è –æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –¢–µ–º–∞ —Å–ª–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—é

## üìã **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

### **`src/components/modals/AIWordGeneratorModal.tsx`:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getUserLevel()` —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ë–î
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `userLevel` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `useEffect` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —É—Ä–æ–≤–Ω—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã AI —Å–µ—Ä–≤–∏—Å–æ–≤ (FreeAI, ChatGPT, –ª–æ–∫–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π

## üéØ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è:**

1. **`user_settings.level`** (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö) - **–ù–ê–ò–í–´–°–®–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢**
2. **`UserService.getUserSettings().level`** (localStorage)
3. **`UserService.getCurrentUserFromDB().level`** (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
4. **`currentUser.level`** (–ª–æ–∫–∞–ª—å–Ω—ã–π fallback)

## ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- ‚úÖ **–£—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ—Ä–µ—Ç—Å—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ—Ñ–∏–ª—è** (—Ç–∞–±–ª–∏—Ü–∞ `user_settings`)
- ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É—Ä–æ–≤–Ω—é –≤ –ø—Ä–æ—Ñ–∏–ª–µ**
- ‚úÖ **UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å**
- ‚úÖ **–í—Å–µ AI —Å–µ—Ä–≤–∏—Å—ã –ø–æ–ª—É—á–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å**
- ‚úÖ **Fallback –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö**
- ‚úÖ **–¢–∏–ø—ã TypeScript –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã**

## üöÄ **–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç —É—Ä–æ–≤–µ–Ω—å –≤ –ø—Ä–æ—Ñ–∏–ª–µ** ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `user_settings.level`
2. **–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ–≤** ‚Üí —Å–∏—Å—Ç–µ–º–∞ –±–µ—Ä–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∏–∑ –ë–î
3. **AI —Å–µ—Ä–≤–∏—Å—ã –ø–æ–ª—É—á–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å** ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Å–ª–æ–≤–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
4. **UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å** ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

**–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–ª–æ–≤ —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫! üéâ**






